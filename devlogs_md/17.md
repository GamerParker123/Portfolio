---
title: Simulation Devlog v0.14: Realtime Responses; ParkerVerse Update v0.10
date: October 5, 2025
summary: The LLM's temporal messaging was fleshed out with new response types, and response times decreased drastically thanks to an optimization in the generation process. ParkerVerse additions across the board, including 5 focus tree features, moderation tools, and UI enhancements.
---

__Simulation Devlog v0.14: Realtime Responses__

When I said I wanted to make responses faster last week, I wasn’t really sure where I was going to go with it. But I figured I should start by measuring the amount of time between tasks. The emotional embedding and memory allocation each took less than half a second each, so the problem wasn’t them. Then, I timed the contextual memory component: over 20 seconds. I suspected contextual memory played a part of it, but I didn’t expect the difference to be that substantial. The main thing slowing it down was an API call in the middle of it; my context is generated by a helper LLM, and the program had to run that process before each message could be sent. So I made the contextual memory layer run in an asynchronous thread, and now messages are almost instantaneous. It’s kind of amazing.

While I was testing, I noticed one of the features I added last week was botched. Miku is meant to message unprompted, but she wasn’t because Streamlit needed to refresh to generate her response (refreshes are only called when a user sends a message). I fixed this by making it automatically refresh every 30 seconds. That brought up some more issues, like messages reloading if they’re generated during the automatic refresh, but I fixed most of those. It’s still rough around the edges; for instance, the refresh gets irritating after a while, and the user responses can still be a little buggy (sometimes you’ll send a response but Miku will think it’s an idle response, so it doesn’t go through). I’ll work on it next week.

I also improved the temporal response types. Before, there were four types that Miku chose from depending on how much time had passed (I mistakenly said there were three last week). Now there are ten, and they tell Miku how to structure her responses. Generally, longer time gaps equates to longer responses and/or topic changes. I also made the message complexity calculation more sophisticated by considering things like punctuation. Additionally, instead of being all or nothing, more memories of each type are generated based on complexity. That sentence probably made no sense, so here’s an example: before, if you had a message that was below the complexity threshold for, say, similar memories, you would get no similar memories in the context. But if it was above the threshold, you would always get a fixed amount of similar memories. Now, it’s variable — so a message that’s a bit complex might have 3 similar memories attached to it, while a very complex one might have 10 similar memories; it’s not a fixed amount. That same logic applies to recent memories and summaries (episodic memories). I’m still not super happy with this system, since I want it to grab the most important memories instead of relying on a single complexity value. Specifically, it should know when similar memories or episodic memories would be relevant, not just produce them blindly off some metric. Message length and punctuation doesn’t encompass that faithfully. But it’s an okay heuristic for now.

Moving on, I fixed a bug where the last user reaction time was inaccurate. No matter how long you waited, the system would always say you last sent a message 0–2 seconds ago. This is because the time was being reset as you sent a new response. So really, that 0–2 second window was just telling the chatbot how long it took between receiving your message and delivering the prompt. I fixed this by only resetting the time after the chatbot responded. Also, there was a bug where idle responses were being treated like regular user responses, as they were resetting the time after being sent. I fixed this by, well, not resetting the last response time if it was an idle message (this just required a true/false flag).

__ParkerVerse Update v0.10__

Before I got to work this week, I sent my plans to ChatGPT to get a second opinion. I wanted to make sure I was doing a reasonable amount of work. ChatGPT said I was doing way too much and that I’d need to focus on 3–5 things if I wanted to be successful. It also said that my two new focus tree features “sounded like fluff.” That comment pissed me off. So instead of two new focus tree features, I added five. I’m not letting that bot tell me what I can’t do.

Here are the focus tree features I added, and I tried to not half-ass them. First, I added one that lets you put a discussion board on your page. Other users can go on this board and leave messages; the ten most recent messages are displayed. This works pretty similar to the comments system on videos — I just added a distinction between video comments and profile comments. Next, I added an upgrade that lets you upload three times a day. I know I just said I didn’t half-ass any of the unlockables, but this is still a useful feature, okay? (Even if it took under five minutes to implement.) Next, I added an upgrade that lets you put a bio on your profile. Another feature lets you customize the color of your username. This one is expensive because I want it to be special (and it can mess with themes). Finally, I added a feature that lets you pin comments. It took a while to implement this because the pinned comments weren’t appearing at the top for whatever reason. It turns out I was sorting the videos by timestamp on the frontend without realizing it, so I just removed that frontend sorting (everything is done in the backend now).

Alright, now onto the boring stuff. There was a bug where the upload page wouldn’t load if the user had no unlocked focuses, which happened because it was expecting an empty array but the focus data was stored as null. Empty focus data is now stored as an empty array. There was also an issue where video views weren’t increasing, and that was happening because the program was checking entire rows in the recent views table instead of a single column. I don’t know if I’ve explained this before, but recent views are stored to prevent users from refreshing the page and generating a ton of views.

I improved the video player quite a bit this week. Before, it used ugly emojis and text buttons, but now it has a sleek design with UI elements that don’t get in the way. The one thing I don’t like is the progress bar. It has a big, red knob to show where you are in the video, and it looks a bit out of place to me. I want something closer to what YouTube has, where the bar fills as you watch the video. The current look is definitely an upgrade from the older one, though. Also, I said I was going to increase the base video volume, but I didn’t touch it. It didn’t seem that quiet when I tested this week. I don’t know why I thought it was quiet last week.

On the moderation end, I added a way to ban users. Admins could delete comments and videos, but you couldn’t ban users. Now they can. I also added email verification, which isn’t super effective for stopping account spam by itself, but it’s a good stepping stone. Finally, I added NSFW detection for thumbnails. It only works for thumbnails right now because video detection is expensive. I did some… testing… and it seems to work. Unfortunately, the model is super bulky. I had to switch to a lighter model to even get it to run on Render because my free tier didn’t have enough memory. I haven’t tested that lighter model, but I don’t feel like looking up more porn. We’ll trust that it works.

I didn’t plan to do this this week, but I made notifications delete if the comment or video doesn’t exist. Since videos are ephemeral, it makes sense to clear out the notifications. I also made individual replies update automatically without needing to refresh the page. This mostly just reused the comment logic. Additionally, videos now load in the sidebar on video pages. Currently, they just load randomly, but I’ll tweak them later to use some sort of algorithm. Because this paragraph doesn’t feel long enough, I’ll also mention that I’m storing the focus tree in a cached JSON file instead of just loading it from the code. Caching it speeds things up, supposedly. I don’t know what the hell a cached file is, honestly.

I have two more bugs to mention. First, there was a bug where the average rating wasn’t showing on the home page or the hall of fame, which was happening because I wasn’t actually defining the average rating in the code. I’m pretty sure the same thing was happening with the following page, but I forget that one exists sometimes. Finally, there was an issue where the admin check wasn’t working on the hall of fame page. This is because it was checking the entire user row instead of a single column. That issue seems to come up a lot. I might shorthand it in the future — if I say the issue was “Supabase stuff,” assume that’s what I mean.

__Development Plans for October 12, 2025__

Here are my plans to complete by next Sunday, October 12:

_The Simulation_
- Hide the recurring page refresh
- Fix the buggy interactions between user and idle messages
- Stop storing idle messages as memories
- Add a harder limit to how many idle messages Miku can send (respectfully, she needs to shut up sometimes)
- Add “wildcard” memories (memories that are randomly included to spur some unpredictability)
- Make Miku reference past memories more

_ParkerVerse_
- Find out what a cached file is
- Add at least two focus tree upgrades
- Add IP detection to help prevent account spam (and look into other measures)
- Add basic video NSFW detection (aside from just thumbnails)
- Streamline the themes system by using a basic set of colors for each (right now, I need to individually change the style for every single UI element for every single theme I add, which has discouraged me from adding more themes)
- Add a few more ways to earn currency
- Add a few more ways to get notifications (ex: comments on your videos)
- Maybe give users a way to customize what notifications they get
- Add “communities” that you can create/join to share videos with friends
- Fix the bug that lets you stretch the comment box off the page (ideally, just remove the ability to stretch the comment box altogether)

_Portfolio_
- Get started on a portfolio website (college applications are coming up soon)

If ChatGPT says that’s too much work, I’m adding ten more focus tree features. Also, I should have a few hours of spare time because I’m not tutoring for a month. Apparently, I forgot to sign up for another tutoring bootcamp, which I’m kind of happy about. I’m not quitting tutoring, but it can be annoying.
